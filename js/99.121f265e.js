"use strict";(self["webpackChunkpanda_nails"]=self["webpackChunkpanda_nails"]||[]).push([[99],{908:function(t,s,e){function i(t){const s=new Date(1e3*t);return s.toLocaleDateString()}function a(t){const s=new Date(1e3*t),e=` ${s.getFullYear()}/${s.getMonth()+1}/${s.getDate()}  ${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`;return e}function c(t){const s=t.toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),s.join(".")}e.d(s,{D:function(){return i},lf:function(){return a},$E:function(){return c}})},799:function(t,s,e){e.d(s,{Z:function(){return u}});var i=e(6252);const a={class:"loadingio-spinner-spin-gw0b9unmls"},c=(0,i._)("div",{class:"ldio-jjk31xq51n"},[(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")])],-1),l=[c];function n(t,s){return(0,i.wg)(),(0,i.iD)("div",a,l)}var o=e(3744);const r={},d=(0,o.Z)(r,[["render",n]]);var u=d},4439:function(t,s,e){e.d(s,{Z:function(){return x}});var i=e(6252),a=e(3577);const c={class:"list d-flex justify-content-center list-unstyled"},l=(0,i._)("i",{class:"bi bi-card-checklist fs-2"},null,-1),n=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 1 .",-1),o=(0,i._)("p",null,"填寫資訊",-1),r=[l,n,o],d=(0,i._)("i",{class:"bi bi-credit-card fs-2"},null,-1),u=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 2 .",-1),p=(0,i._)("p",null,"確認付款",-1),_=[d,u,p],h=(0,i._)("i",{class:"bi bi-cart-check fs-2"},null,-1),b=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 3 .",-1),m=(0,i._)("p",null,"訂單完成",-1),v=[h,b,m];function g(t,s,e,l,n,o){return(0,i.wg)(),(0,i.iD)("ul",c,[(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.createOrder}])},r,2),(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.payCheck}])},_,2),(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.success}])},v,2)])}var f={props:{stepStatus:{type:Object}}},y=e(3744);const w=(0,y.Z)(f,[["render",g]]);var x=w},6099:function(t,s,e){e.r(s),e.d(s,{default:function(){return ft}});var i=e(6252),a=e(3577);const c={class:"position-relative"},l=(0,i._)("div",{class:"background-secondary position-absolute h-100 w-100",style:{"z-index":"-1"}},null,-1),n={class:"container pt-5"},o={key:0,class:"row mt-5"},r={class:"col-lg-4"},d={class:"list-unstyled"},u=(0,i._)("li",{class:"border-bottom h4 text-start"},[(0,i._)("div",null,"確認訂單明細")],-1),p={style:{"max-height":"350px","overflow-y":"auto"}},_={class:"row g-0"},h={class:"col-4 col-md-3 col-lg-4"},b=["src"],m={class:"col-8 col-md-9 col-lg-8 g-3 d-flex flex-column g-3 justify-content-between"},v={class:"card-body d-flex flex-column justify-content-between p-1"},g={class:"card-title fs-5 text-start"},f={class:"text-start mb-0"},y={class:"text-muted"},w={class:"mb-0 text-end fs-4"},x={class:"list-unstyled"},k={class:"input-group mb-3 pt-3 border-top"},C={key:0,type:"text",class:"form-control p-2",placeholder:"已套用優惠券",disabled:""},$=["disabled"],j=(0,i.Uk)(" 套用優惠券 "),S=(0,i._)("div",{class:"loading d-none fade"},null,-1),D=[j,S],O={key:0,class:"border-0 d-flex justify-content-between fs-4"},z=(0,i._)("p",{class:"p-1"},"總計",-1),L={class:"p-1"},T={key:1,class:"border-0 fs-4"},Z={class:"fs-5 d-flex justify-content-between"},q=(0,i._)("p",{class:"p-1"},"總計",-1),E={class:"p-1"},N={class:"d-flex justify-content-between"},I=(0,i._)("p",{class:"p-1"},"折扣後金額：",-1),H={class:"fs-4"},M={class:"col-lg-8 justify-content-center text-start border"},P=(0,i._)("div",{class:"text-start h2 border-bottom-0"},"訂購人資訊",-1),U={class:"mb-3"},W=(0,i._)("div",{class:"mb-2"},"Email",-1),Y={class:"h5"},F={class:"mb-3"},B=(0,i._)("div",{class:"mb-2"},"收件人姓名",-1),G={class:"h5"},K={class:"mb-3"},V=(0,i._)("div",{class:"mb-2"},"收件人電話",-1),A={class:"h5"},J={class:"mb-3"},Q=(0,i._)("div",{class:"mb-2"},"留言",-1),R={class:"h5"},X={class:"text-center my-5"},tt={key:1,class:"row mt-5"},st={class:"col-lg-8 justify-content-center text-center border mb-5 mx-auto"},et={class:"row"},it={class:"col-md-9 col-xl-7 mx-auto"},at={class:"card-body bg- text-center py-6 shadow-lg"},ct=(0,i.uE)('<i class="bi bi-check-lg fa-4x text-success"></i><h3 class="h3 mb-4">付款成功</h3><div class="h5 mb-3">感謝您的訂購～</div><div class="d-flex justify-content-center align-items-center mb-3"> 請將此圖截下私訊IG小盒子 <a href="https://www.instagram.com/panda__57.nail/" target="_blank" class="text-white mx-3"><i class="bi bi-instagram fs-3 text-black"></i></a></div><div class="mb-4">可至訂單查詢詳細資料</div>',5),lt={class:"mb-3"},nt={class:"h5"},ot=(0,i._)("i",{class:"far fa-copy"},null,-1),rt=[ot],dt=(0,i._)("a",{href:"#/OrderTracking",class:"btn btn-outline-primary"},"前往查詢",-1);function ut(t,s,e,j,S,ot){const ut=(0,i.up)("LoadingComponent"),pt=(0,i.up)("VLoading"),_t=(0,i.up)("StepStatusComponent");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(pt,{active:S.isLoading,"z-index":1060},{default:(0,i.w5)((()=>[(0,i.Wm)(ut)])),_:1},8,["active"]),(0,i._)("div",c,[l,(0,i._)("div",n,[(0,i.Wm)(_t,{"step-status":S.stepStatus},null,8,["step-status"]),S.stepStatus.payCheck&&Object.keys(S.order).length>0?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",r,[(0,i._)("ul",d,[u,(0,i._)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(S.order.products,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"card border-0 p-3 background-secondary",key:t.id+"123"},[(0,i._)("div",_,[(0,i._)("div",h,[(0,i._)("img",{src:t.product.imageUrl,class:"img-fluid",style:{"object-fit":"contain"},alt:"cart.product.title"},null,8,b)]),(0,i._)("div",m,[(0,i._)("div",v,[(0,i._)("p",g,(0,a.zw)(t.product.title),1),(0,i._)("p",f,[(0,i._)("small",y,"NT$"+(0,a.zw)(ot.toThousandths(t.product.price))+" / "+(0,a.zw)(t.product.unit),1)]),(0,i._)("p",w," NT$"+(0,a.zw)(ot.toThousandths(t.qty*t.product.price)),1)])])])])))),128))])]),(0,i._)("ul",x,[(0,i._)("li",k,[S.isCoupon?((0,i.wg)(),(0,i.iD)("input",C)):(0,i.kq)("",!0),S.isCoupon?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-primary px-3",disabled:S.isCoupon},D,8,$)):(0,i.kq)("",!0)]),S.isCoupon?((0,i.wg)(),(0,i.iD)("li",T,[(0,i._)("small",Z,[q,(0,i._)("del",E,"NT$"+(0,a.zw)(ot.toThousandths(S.beforeOrderPrice)),1)]),(0,i._)("div",N,[I,(0,i._)("span",H,"$ "+(0,a.zw)(ot.toThousandths(Math.round(S.order.total)))+" NTD",1)])])):((0,i.wg)(),(0,i.iD)("li",O,[z,(0,i._)("p",L,"NT$"+(0,a.zw)(ot.toThousandths(S.order.total)),1)]))])]),(0,i._)("div",M,[P,(0,i._)("div",U,[W,(0,i._)("p",Y,(0,a.zw)(S.order.user.email),1)]),(0,i._)("div",F,[B,(0,i._)("p",G,(0,a.zw)(S.order.user.name),1)]),(0,i._)("div",K,[V,(0,i._)("p",A,(0,a.zw)(S.order.user.tel),1)]),(0,i._)("div",J,[Q,(0,i._)("p",R,(0,a.zw)(S.order.user.message),1)]),(0,i._)("div",X,[(0,i._)("button",{type:"button",class:"btn btn-primary fs-3",onClick:s[0]||(s[0]=(...t)=>ot.payCheck&&ot.payCheck(...t))}," 確認付款 ")])])])):(0,i.kq)("",!0),S.stepStatus.success&&Object.keys(S.order).length>0?((0,i.wg)(),(0,i.iD)("div",tt,[(0,i._)("div",st,[(0,i._)("div",et,[(0,i._)("div",it,[(0,i._)("div",at,[ct,(0,i._)("div",lt,[(0,i._)("p",nt,[(0,i.Uk)(" 訂單編號:"+(0,a.zw)(S.order.id)+" ",1),(0,i._)("span",{class:"ms-3",type:"button",onClick:s[1]||(s[1]=t=>ot.copyOrderId(S.order.id))},rt)])]),dt])])])])])):(0,i.kq)("",!0)])])],64)}var pt=e(4902),_t=e(799),ht=e(4439),bt=e(908),mt={components:{LoadingComponent:_t.Z,StepStatusComponent:ht.Z},data(){return{carts:{},isLoadingItem:"",isLoading:!1,isCoupon:{type:!1},code:"",stepStatus:{createOrder:!1,payCheck:!0,success:!1},order:{},beforeOrderPrice:0}},methods:{DateFn:bt.D,toThousandths:bt.$E,getOrder(){const{id:t}=this.$route.params,s=`https://vue3-course-api.hexschool.io/v2/api/clothes/order/${t}`;this.isLoading=!0,this.$http.get(s).then((t=>{this.order=t.data.order;let s=0;Object.values(this.order.products).forEach((t=>{if(void 0===t.coupon)this.isCoupon=!1;else{const{coupon:e}=t;s+=t.total,this.beforeOrderPrice=s,this.isCoupon=e,this.isCoupon.type=!0}})),this.isLoading=!1})).catch((t=>{this.isLoading=!1,pt.Z.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},payCheck(){this.stepStatus.payCheck=!1,this.stepStatus.success=!0,this.payOrder()},payOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2/api/clothes/pay/${this.order.id}`;this.$http.post(t).then((t=>{t.data.success&&(this.isLoading=!1,pt.Z.emit("push-message",{style:"success",title:`${t.data.message}`}))})).catch((t=>{this.isLoading=!1,pt.Z.emit("push-message",{style:"success",title:`${t.response.data.message}`})}))},copyOrderId(t){navigator.clipboard&&(navigator.clipboard.writeText(t),pt.Z.emit("push-message",{style:"success",title:`${t}\n已複製到剪貼簿`}))}},mounted(){this.getOrder()}},vt=e(3744);const gt=(0,vt.Z)(mt,[["render",ut]]);var ft=gt}}]);
//# sourceMappingURL=99.121f265e.js.map